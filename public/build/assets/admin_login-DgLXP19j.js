import{C as o}from"./EventListnerManager-CB5a1GMq.js";import{P as t}from"./PageManager-Cgue3mZy.js";class i extends t{constructor(){super("admin-sign-in")}async load(){this.data={title:"Admin Sign In",description:"Admin Sign In Page"}}init(){}setListners(){this.ELM.setClickListners("#adminLoginBtn",this.login),this.ELM.setClickListners("#showPasswordBtn",()=>{this.showPassword("password")})}actions(){}showPassword(n){const s=document.getElementById(n),e=document.getElementById("showPasswordBtn");s.type==="password"?(s.type="text",e.innerHTML='<i class="fa-solid fa-eye"></i>'):(s.type="password",e.innerHTML='<i class="fa-solid fa-eye-slash"></i>')}async login(){const n=o.UIM.getInputs("adminLoginForm",{}),s=await o.RM.post("/api/admin/login",n,{requestType:"json",responseType:"json",showToast:!0});if(console.log(s),s.token){o.debugLog(s.token),o.LSM.setItem("token",s.token),console.log("Success");try{try{(await(await fetch("/admin/web-auth",{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${s.token}`},credentials:"include"})).json()).results.role_id===1&&(window.location.href="/admin")}catch(e){console.error("Error in GET request:",e)}}catch(e){console.error("Error in GET request:",e)}}else console.log("Token is missing, unable to proceed")}}document.addEventListener("DOMContentLoaded",()=>{new i});
